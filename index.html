<!DOCTYPE html>
<html>
<head>
	<title>Event Registration Form</title>
	<style>
		body {
			background-color: #F2E8C4; /* light desert color */
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			font-size: 16px;
		}
		h1 {
			color: #0E5C6D; /* sea color */
			text-align: center;
			margin-top: 50px;
			text-shadow: 2px 2px 0px #FFF8DC, 4px 4px 0px #0E5C6D;
			font-size: 50px;
			line-height: 1;
			letter-spacing: 5px;
			padding-bottom: 30px;
		}
		form {
			margin: 50px auto;
			width: 50%;
			padding: 40px;
			background-color: #FFF8DC; /* desert color */
			border-radius: 50px;
			box-shadow: 10px 10px 30px #BFBFBF;
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		label {
			color: #0E5C6D; /* sea color */
			font-size: 24px;
			margin-bottom: 10px;
			text-shadow: 1px 1px 0px #FFF8DC;
		}
		input[type="text"] {
			padding: 10px;
			border-radius: 30px;
			border: none;
			background-color: #F2E8C4; /* light desert color */
			color: #0E5C6D; /* sea color */
			margin-bottom: 20px;
			width: 100%;
			font-size: 18px;
			text-align: center;
			text-shadow: 1px 1px 0px #FFF8DC;
		}
		input[type="submit"] {
			padding: 10px 30px;
			border-radius: 30px;
			border: none;
			background-color: #0E5C6D; /* sea color */
			color: #FFFFFF;
			font-size: 24px;
			cursor: pointer;
			box-shadow: 2px 2px 0px #FFF8DC, 4px 4px 0px #0E5C6D;
			text-shadow: 1px 1px 0px #FFF8DC;
			transition: all 0.2s ease-in-out;
		}
		input[type="submit"]:hover {
			transform: translate(2px, 2px);
			box-shadow: none;
			text-shadow: none;
		}
	</style>
</head>
<body>
	<h1> היי <span id="name"></span></h1>
	<form id="invitation">
		<label for="phone">Phone Number:</label>
		<input required type="text" id="phone" name="phone" placeholder="Enter your phone number...">
		<label for="arrival">Number of People Arriving:</label>
		<select required type="text" id="arrival" name="arrival" placeholder="Enter the number of people arriving...">
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>עוד</option>
		</select>
		<input id="submit" type="submit" value="שלח">
		<input type="button" value="לא מגיע">
	</form>
	<script>
		  	const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const name = urlParams.get('name')
			document.getElementById('name').innerHTML = name || 'לך';
			const form = document.getElementById('invitation')
			form.addEventListener('submit' , (event)=> {
				event.preventDefault();
				sendData()
			})
			function sendData() {
				const phone = document.getElementById('phone').value
				const amount = document.getElementById('arrival').value
				let attendenceName = name;
				const payload = {name:attendenceName , amount: amount, phone:phone , isComming:true }
				console.log(payload);
				if (phone && amount && name) {
					executeRequest(payload);
				}
				const isComming = document.getElementById('is');
			}

			function executeRequest(payload) {
				fetch("https://vivacious-tweed-jacket-jay.cyclic.app//newArrival", {
					method: "POST",
					body: JSON.stringify(payload),
					headers: {
						"Content-type": "application/json; charset=UTF-8"
					}
					}).then((res)=> {
						console.log(res);
					}).catch((err) => {
						console.log(err);
					});
			}
			
	</script>
</body>
</html>
